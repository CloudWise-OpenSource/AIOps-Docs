# 基于标准差异常检测算法

**基于标准差异常检测算法文档** 

## 1k-sigma算法简介

异常检测算法通过时间序列数据中规律性进行挖掘，检测异于正常模式的值或序列。此处应当注意，异常检测算法针对的对象是有规律性的时间序列数据。其中蕴含了两层含义：若是数据中没有规律或规律性很弱则难以形成有效的检测结果；若异常的定义是针对业务，而非仅仅针对数据本身，则在很多情形下“业务认为的异常”和异常检测算法得到的“数据异常”有冲突，此时较为妥当的处理方式为通过在“数据异常”基础上添加业务规则，从而满足业务方需求。

## 2 算法描述

k-sigma算法是各行各业广为使用的异常检测方法，其原理为给定数据上下边界值，该边界由数据均值与数据本书一定倍数标准差构成，标准差的系数代表了结果的置信度，通过判断实际数据是否位于边界内来判定数据点的异常情形。数据点大于阈值上边界或小于阈值下边界则被认为是异常点，否则为正常点。该算法具有运算效率高，但需要剔除掉数据中同一时间戳的重复数据。

**3 使用操作** 

输入数据格式需要为Json形式，数据内容需包含时间、数据值，其中数据为浮点型格式，时间为13位时间戳格式。示例如下：

'[{"value": 69.91 , "timestamp": 1585670400000 },

{"value": 60.78 , "timestamp": 1585670700000 },

{"value": 61.70 , "timestamp": 1585671000000 },

{"value": 69.82 , "timestamp": 1585671300000 },

{"value": 63.39 , "timestamp": 1585671600000 },

{"value": 67.79 , "timestamp": 1585671900000 },

{"value": 66.53 , "timestamp": 1587168900000 },

{"value": 65.72 , "timestamp": 1587169200000 },

{"value": 65.54 , "timestamp": 1587169500000 },

{"value": 65.82 , "timestamp": 1587169800000 },

{"value": 61.98 , "timestamp": 1587170100000 }]'

算法输入参数为：

|**参数** |**默认值** |**取值范围** |**是否建议开放** |**建议主要调节参数** |**描述信息** |
|---|---|---|---|---|---|
|sigma_up|-|-|开放|前端设置|数据上边界对应的标准差值|
|sigma_down|-|-|开放|前端设置|数据下边界对应的标准差值|



输出结果是下图的json串格式：

![屏幕快照 2021-01-28 11.39.42](/images/x7BPm89tbrTri8KSUYacgP.png)

其中： ‘timestamp’为检测数据的时间戳；‘value’为检测数据的数值；‘baseline’为基线；’value_upper’为正常数据的上边界；’value_lower’为正常数据的下边界;’anomaly’为数据是否为异常，1表示异常，0表示正常；’significance’为表征异常程度的指标，数值在(0,1]内变化,数值越大表示异常程度越高。

